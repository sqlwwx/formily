{"version":3,"file":"portal.js","sourceRoot":"","sources":["../../../src/__builtins__/shared/portal.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,eAAe,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAA;AACvE,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAA;AAK1C,IAAM,SAAS,GAAG,IAAI,GAAG,EAAwB,CAAA;AAEjD,MAAM,CAAC,IAAM,oBAAoB,GAAG,UAAC,EAAmB;IACtD,IAAM,MAAM,GAAG,eAAe,CAAC;QAC7B,IAAI,EAAE,gBAAgB;QACtB,KAAK,EAAE;YACL,EAAE,EAAE;gBACF,IAAI,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC;gBACtB,OAAO,EAAE,EAAE;aACZ;SACF;QAED,KAAK,YAAC,KAAK;YACT,eAAe,CAAC;gBACN,IAAA,EAAE,GAAK,KAAK,GAAV,CAAU;gBACpB,IAAI,EAAE,IAAI,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;oBAC3B,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;iBACrB;YACH,CAAC,CAAC,CAAA;QACJ,CAAC;QAED,MAAM;YACI,IAAA,EAAE,GAAK,IAAI,GAAT,CAAS;YACnB,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;gBAC5B,SAAS,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,CAAA;aACxB;YAED,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAA;QAC3C,CAAC;KACF,CAAC,CAAA;IAEF,OAAO,MAAM,CAAA;AACf,CAAC,CAAA;AAED,MAAM,UAAU,gBAAgB,CAAC,EAAmB;IAClD,OAAO,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;AAC1B,CAAC","sourcesContent":["import { defineComponent, onBeforeUnmount } from '@vue/composition-api'\nimport { h, Fragment } from '@formily/vue'\nexport interface IPortalProps {\n  id?: string | symbol\n}\n\nconst PortalMap = new Map<string | symbol, any>()\n\nexport const createPortalProvider = (id: string | symbol) => {\n  const Portal = defineComponent({\n    name: 'ProtalProvider',\n    props: {\n      id: {\n        type: [String, Symbol],\n        default: id,\n      },\n    },\n\n    setup(props) {\n      onBeforeUnmount(() => {\n        const { id } = props\n        if (id && PortalMap.has(id)) {\n          PortalMap.delete(id)\n        }\n      })\n    },\n\n    render() {\n      const { id } = this\n      if (id && !PortalMap.has(id)) {\n        PortalMap.set(id, this)\n      }\n\n      return h(Fragment, {}, this.$scopedSlots)\n    },\n  })\n\n  return Portal\n}\n\nexport function getProtalContext(id: string | symbol) {\n  return PortalMap.get(id)\n}\n"]}
{"version":3,"file":"useFormEffects.js","sourceRoot":"","sources":["../../src/hooks/useFormEffects.ts"],"names":[],"mappings":";;;AAAA,+BAAgD;AAEhD,0CAAqC;AACrC,qCAAmC;AAE5B,IAAM,cAAc,GAAG,UAAC,OAA8B;IAC3D,IAAM,IAAI,GAAG,IAAA,iBAAO,GAAE,CAAA;IACtB,IAAM,GAAG,GAAG,IAAA,eAAO,EAAC;QAClB,IAAM,EAAE,GAAG,IAAA,YAAG,GAAE,CAAA;QAChB,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,OAAO,CAAC,CAAA;QAC5B,IAAM,OAAO,GAAG,UAAU,CAAC;YACzB,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAA;QACxB,CAAC,EAAE,GAAG,CAAC,CAAA;QACP,OAAO,EAAE,EAAE,IAAA,EAAE,OAAO,SAAA,EAAE,CAAA;IACxB,CAAC,EAAE,EAAE,CAAC,CAAA;IACN,IAAA,uBAAe,EAAC;QACd,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;QACzB,OAAO;YACL,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;QAC5B,CAAC,CAAA;IACH,CAAC,EAAE,EAAE,CAAC,CAAA;AACR,CAAC,CAAA;AAhBY,QAAA,cAAc,kBAgB1B","sourcesContent":["import { useLayoutEffect, useMemo } from 'react'\nimport { Form } from '@formily/core'\nimport { uid } from '@formily/shared'\nimport { useForm } from './useForm'\n\nexport const useFormEffects = (effects?: (form: Form) => void) => {\n  const form = useForm()\n  const ref = useMemo(() => {\n    const id = uid()\n    form.addEffects(id, effects)\n    const request = setTimeout(() => {\n      form.removeEffects(id)\n    }, 100)\n    return { id, request }\n  }, [])\n  useLayoutEffect(() => {\n    clearTimeout(ref.request)\n    return () => {\n      form.removeEffects(ref.id)\n    }\n  }, [])\n}\n"]}
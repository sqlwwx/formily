{"version":3,"file":"collectData.js","sourceRoot":"","sources":["../../src/observer/collectData.ts"],"names":[],"mappings":";AAAA,oEAAoE;;AAEpE;;;;GAIG;AAEH,8CAAgD;AAEhD,SAAwB,WAAW,CAAC,EAAO,EAAE,IAAU;IACrD,IAAM,cAAc,GAClB,OAAO,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,CAAA;IAC7D,IAAM,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,CACrD,UAAC,MAAW,EAAE,KAAK;QACjB,IAAM,KAAK,GAAG,cAAc,CAAC,KAAK,CAAC,CAAA;QAEnC,IAAI,IAAA,uBAAY,EAAC,KAAK,CAAC,EAAE;YACvB,MAAM,CAAC,cAAc,CAAC,EAAE,EAAE,KAAK,EAAE;gBAC/B,YAAY,EAAE,IAAI;gBAClB,GAAG;oBACD,OAAO,KAAK,CAAA;gBACd,CAAC;gBACD,GAAG,gBAAI,CAAC;aACT,CAAC,CAAA;SACH;aAAM;YACL,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,CAAA;SACtB;QAED,OAAO,MAAM,CAAA;IACf,CAAC,EACD,EAAE,CACH,CAAA;IAED,OAAO,YAAY,CAAA;AACrB,CAAC;AAzBD,8BAyBC","sourcesContent":["// https://github.com/mobxjs/mobx-vue/blob/master/src/collectData.ts\n\n/**\n * @author Kuitos\n * @homepage https://github.com/kuitos/\n * @since 2018-06-08 10:16\n */\n\nimport { isObservable } from '@formily/reactive'\n\nexport default function collectData(vm: any, data?: any) {\n  const dataDefinition =\n    typeof data === 'function' ? data.call(vm, vm) : data || {}\n  const filteredData = Object.keys(dataDefinition).reduce(\n    (result: any, field) => {\n      const value = dataDefinition[field]\n\n      if (isObservable(value)) {\n        Object.defineProperty(vm, field, {\n          configurable: true,\n          get() {\n            return value\n          },\n          set() {},\n        })\n      } else {\n        result[field] = value\n      }\n\n      return result\n    },\n    {}\n  )\n\n  return filteredData\n}\n"]}
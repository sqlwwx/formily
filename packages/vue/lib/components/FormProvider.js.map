{"version":3,"file":"FormProvider.js","sourceRoot":"","sources":["../../src/components/FormProvider.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,qCAA0D;AAC1D,6CAO0B;AAE1B,gDAA8C;AAC9C,oEAAkE;AAClE,kDAA2B;AAC3B,+CAA6C;AAI7C,kBAAe,IAAA,0BAAe,EAAiB;IAC7C,IAAI,EAAE,cAAc;IACpB,YAAY,EAAE,KAAK;IACnB,KAAK,EAAE;QACL,IAAI,EAAE;YACJ,IAAI,EAAE,MAAM;YACZ,QAAQ,EAAE,IAAI;SACf;KACF;IACD,KAAK,EAAL,UAAM,KAAqB,EAAE,EAAgB;YAAd,KAAK,WAAA,EAAE,KAAK,WAAA;QACzC,IAAM,OAAO,GAAG,cAAM,OAAA,KAAK,CAAC,IAAI,EAAV,CAAU,CAAA;QAC1B,IAAA,KAAA,OAAqB,IAAA,qBAAS,EAAC,OAAO,EAAE,CAAC,IAAA,EAAxC,OAAO,QAAA,EAAE,OAAO,QAAwB,CAAA;QAC/C,IAAA,gBAAK,EACH,cAAM,OAAA,KAAK,CAAC,IAAI,EAAV,CAAU,EAChB,cAAM,OAAA,CAAC,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC,EAApC,CAAoC,CAC3C,CAAA;QAED,IAAA,kBAAO,EAAC,oBAAU,EAAE,OAAO,CAAC,CAAA;QAC5B,IAAA,yCAAmB,EAAC;YAClB,qBAAW;YACX,4BAAkB;YAClB,sBAAY;YACZ,qCAA2B;YAC3B,6BAAmB;SACpB,CAAC,CAAA;QAEF,OAAO,cAAM,OAAA,IAAA,WAAC,EAAC,mBAAQ,EAAE,EAAE,KAAK,OAAA,EAAE,EAAE,KAAK,CAAC,EAA7B,CAA6B,CAAA;IAC5C,CAAC;CACF,CAA+C,CAAA","sourcesContent":["import { provide, defineComponent, watch } from 'vue-demi'\nimport {\n  FormSymbol,\n  FieldSymbol,\n  SchemaMarkupSymbol,\n  SchemaSymbol,\n  SchemaExpressionScopeSymbol,\n  SchemaOptionsSymbol,\n} from '../shared/context'\nimport { IProviderProps } from '../types'\nimport { useAttach } from '../hooks/useAttach'\nimport { useInjectionCleaner } from '../hooks/useInjectionCleaner'\nimport h from '../shared/h'\nimport { Fragment } from '../shared/fragment'\n\nimport type { DefineComponent } from '../types'\n\nexport default defineComponent<IProviderProps>({\n  name: 'FormProvider',\n  inheritAttrs: false,\n  props: {\n    form: {\n      type: Object,\n      required: true,\n    },\n  },\n  setup(props: IProviderProps, { attrs, slots }) {\n    const getForm = () => props.form\n    const [formRef, checker] = useAttach(getForm())\n    watch(\n      () => props.form,\n      () => (formRef.value = checker(getForm()))\n    )\n\n    provide(FormSymbol, formRef)\n    useInjectionCleaner([\n      FieldSymbol,\n      SchemaMarkupSymbol,\n      SchemaSymbol,\n      SchemaExpressionScopeSymbol,\n      SchemaOptionsSymbol,\n    ])\n\n    return () => h(Fragment, { attrs }, slots)\n  },\n}) as unknown as DefineComponent<IProviderProps>\n"]}
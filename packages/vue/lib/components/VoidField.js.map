{"version":3,"file":"VoidField.js","sourceRoot":"","sources":["../../src/components/VoidField.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qCAAoE;AACpE,kCAA4C;AAC5C,gDAA8C;AAC9C,kEAA2C;AAC3C,6CAA+C;AAC/C,kDAA2B;AAC3B,4DAA0D;AAI1D,kBAAe,IAAA,0BAAe,EAAkB;IAC9C,IAAI,EAAE,WAAW;IACjB,KAAK,EAAE;QACL,IAAI,EAAE,EAAE;QACR,KAAK,EAAE,EAAE;QACT,WAAW,EAAE,EAAE;QACf,QAAQ,EAAE,EAAE;QACZ,SAAS,EAAE,KAAK;QAChB,SAAS,EAAE,KAAK;QAChB,OAAO,EAAE,MAAM;QACf,OAAO,EAAE,MAAM;QACf,MAAM,EAAE;YACN,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,SAAS;SACnB;QACD,OAAO,EAAE;YACP,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,SAAS;SACnB;QACD,QAAQ,EAAE;YACR,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,SAAS;SACnB;QACD,QAAQ,EAAE;YACR,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,SAAS;SACnB;QACD,QAAQ,EAAE;YACR,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,SAAS;SACnB;QACD,UAAU,EAAE;YACV,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,SAAS;SACnB;QACD,SAAS,EAAE,CAAC,KAAK,EAAE,QAAQ,CAAC;KAC7B;IACD,KAAK,EAAL,UAAM,KAAsB,EAAE,EAAS;YAAP,KAAK,WAAA;QACnC,IAAM,OAAO,GAAG,IAAA,eAAO,GAAE,CAAA;QACzB,IAAM,SAAS,GAAG,IAAA,gBAAQ,GAAE,CAAA;QAE5B,IAAM,QAAQ,GAAG,IAAA,mBAAQ,EAAC,sBACxB,OAAA,KAAK,CAAC,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAA,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,KAAK,0CAAE,OAAO,CAAA,EAAA,CAC1E,CAAA;QACD,IAAM,WAAW,GAAG;YAClB,OAAA,OAAO,CAAC,KAAK,CAAC,eAAe,gCACxB,KAAK,KACR,QAAQ,EAAE,QAAQ,CAAC,KAAK,KACrB,IAAA,iCAAe,EAAC,KAAK,CAAC,EACzB;QAJF,CAIE,CAAA;QACE,IAAA,KAAA,OAAsB,IAAA,qBAAS,EAAC,WAAW,EAAE,CAAC,IAAA,EAA7C,QAAQ,QAAA,EAAE,OAAO,QAA4B,CAAA;QACpD,IAAA,gBAAK,EACH,cAAM,OAAA,KAAK,EAAL,CAAK,EACX,cAAM,OAAA,CAAC,QAAQ,CAAC,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC,EAAzC,CAAyC,EAC/C,EAAE,IAAI,EAAE,IAAI,EAAE,CACf,CAAA;QACD,IAAA,gBAAK,EAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,cAAM,OAAA,CAAC,QAAQ,CAAC,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC,EAAzC,CAAyC,CAAC,CAAA;QAE5E,IAAA,kBAAO,EAAC,qBAAW,EAAE,QAAQ,CAAC,CAAA;QAE9B,OAAO;YACL,IAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAA;YAC5B,IAAM,aAAa,GAAG;gBACpB,KAAK,EAAE;oBACL,KAAK,OAAA;iBACN;aACF,CAAA;YACD,IAAM,QAAQ,gBACT,KAAK,CACT,CAAA;YACD,IAAI,KAAK,CAAC,OAAO,EAAE;gBACjB,QAAQ,CAAC,OAAO,GAAG;oBACjB,OAAA,KAAK,CAAC,OAAO,CAAC;wBACZ,KAAK,EAAE,KAAK;wBACZ,IAAI,EAAE,KAAK,CAAC,IAAI;qBACjB,CAAC;gBAHF,CAGE,CAAA;aACL;YACD,OAAO,IAAA,WAAC,EAAC,uBAAa,EAAE,aAAa,EAAE,QAAQ,CAAC,CAAA;QAClD,CAAC,CAAA;IACH,CAAC;CACF,CAAgD,CAAA","sourcesContent":["import { provide, defineComponent, computed, watch } from 'vue-demi'\nimport { useField, useForm } from '../hooks'\nimport { useAttach } from '../hooks/useAttach'\nimport ReactiveField from './ReactiveField'\nimport { FieldSymbol } from '../shared/context'\nimport h from '../shared/h'\nimport { getRawComponent } from '../utils/getRawComponent'\n\nimport type { IVoidFieldProps, DefineComponent } from '../types'\n\nexport default defineComponent<IVoidFieldProps>({\n  name: 'VoidField',\n  props: {\n    name: {},\n    title: {},\n    description: {},\n    basePath: {},\n    decorator: Array,\n    component: Array,\n    display: String,\n    pattern: String,\n    hidden: {\n      type: Boolean,\n      default: undefined,\n    },\n    visible: {\n      type: Boolean,\n      default: undefined,\n    },\n    editable: {\n      type: Boolean,\n      default: undefined,\n    },\n    disabled: {\n      type: Boolean,\n      default: undefined,\n    },\n    readOnly: {\n      type: Boolean,\n      default: undefined,\n    },\n    readPretty: {\n      type: Boolean,\n      default: undefined,\n    },\n    reactions: [Array, Function],\n  },\n  setup(props: IVoidFieldProps, { slots }) {\n    const formRef = useForm()\n    const parentRef = useField()\n\n    const basePath = computed(() =>\n      props.basePath !== undefined ? props.basePath : parentRef?.value?.address\n    )\n    const createField = () =>\n      formRef.value.createVoidField({\n        ...props,\n        basePath: basePath.value,\n        ...getRawComponent(props),\n      })\n    const [fieldRef, checker] = useAttach(createField())\n    watch(\n      () => props,\n      () => (fieldRef.value = checker(createField())),\n      { deep: true }\n    )\n    watch([formRef, parentRef], () => (fieldRef.value = checker(createField())))\n\n    provide(FieldSymbol, fieldRef)\n\n    return () => {\n      const field = fieldRef.value\n      const componentData = {\n        props: {\n          field,\n        },\n      }\n      const children = {\n        ...slots,\n      }\n      if (slots.default) {\n        children.default = () =>\n          slots.default({\n            field: field,\n            form: field.form,\n          })\n      }\n      return h(ReactiveField, componentData, children)\n    }\n  },\n}) as unknown as DefineComponent<IVoidFieldProps>\n"]}